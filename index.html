<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="Lumieru的知识库">
<meta property="og:url" content="https://lumieru.github.io/index.html">
<meta property="og:site_name" content="Lumieru的知识库">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Lumieru的知识库">





  
  
  <link rel="canonical" href="https://lumieru.github.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Lumieru的知识库</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Lumieru的知识库</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lumieru.github.io/2020/04/07/AWS-EC2实例的带宽数据/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lumieru">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lumieru的知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/04/07/AWS-EC2实例的带宽数据/" class="post-title-link" itemprop="url">AWS EC2实例的带宽数据</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-04-07 14:35:07 / 修改时间：14:39:53" itemprop="dateCreated datePublished" datetime="2020-04-07T14:35:07+08:00">2020-04-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Cloud/" itemprop="url" rel="index"><span itemprop="name">Cloud</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><a href="https://cloudonaut.io/ec2-network-performance-cheat-sheet/" target="_blank" rel="noopener">原文出处</a></p>
<p>What is the maximum network throughput of your EC2 instance? The answer to this question is key to choosing the type of an instance or defining monitoring alerts on network throughput.</p>
<p>EC2 Network Performance Cheat Sheet</p>
<p>Unfortunately, you will only find very vague information about the networking capabilities of EC2 instances within AWS’s service description and documentation. That is why I run a network performance benchmark for almost all EC2 instance types within the last few days. The results are compiled into the following cheat sheet.</p>
<p>The data analysis in the following table shows the burst and baseline throughput of each instance type. The burst throughput is defined as the 95th percentile, which means the throughput was at least reached for 3 minutes. The baseline throughput is defined as the 10th percentile, which means the throughput was reached at least for 54 minutes.</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2020/04/07/AWS-EC2实例的带宽数据/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lumieru.github.io/2020/03/06/UMA自定义材质设置和带cloth的slot制作指南/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lumieru">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lumieru的知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/03/06/UMA自定义材质设置和带cloth的slot制作指南/" class="post-title-link" itemprop="url">UMA自定义材质设置和带cloth的slot制作指南</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-03-06 11:44:39 / 修改时间：14:42:12" itemprop="dateCreated datePublished" datetime="2020-03-06T11:44:39+08:00">2020-03-06</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="UMA的贴图处理"><a href="#UMA的贴图处理" class="headerlink" title="UMA的贴图处理"></a>UMA的贴图处理</h2><p>UMA检测到贴图需要处理时，就会调用<code>TextureProcessPROCoroutine.cs</code>文件里的<code>workerMethod()</code>来合并贴图，并把最终结果输出到一个<code>RenderTexture</code>中。真正合成贴图的操作是在<code>TextureMerge.cs</code>中完成的。对于UMA提供的5中贴图类型，只有其中三种是需要调用shader来进行合并处理的，剩下的两种不处理贴图，只是把原图设置到目标材质，或者把颜色设置到目标材质。具体的操作如下表</p>
<table>
<thead>
<tr>
<th>贴图类型</th>
<th>操作</th>
<th>对应shader</th>
</tr>
</thead>
<tbody>
<tr>
<td>Texture</td>
<td>利用shader合图</td>
<td>AtlasShader</td>
</tr>
<tr>
<td>DiffuseTexture</td>
<td>利用shader合图</td>
<td>AtlasDiffuseShader</td>
</tr>
<tr>
<td>NormalMap</td>
<td>利用shader合图</td>
<td>AtlasNormalShader</td>
</tr>
<tr>
<td>MaterialColor</td>
<td>不处理贴图，只设置颜色</td>
<td>无</td>
</tr>
<tr>
<td>TintedTexture</td>
<td>不处理贴图，设置颜色和原始贴图</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>上面提到的3个shader，除了需要一张<code>_MainTex</code>外，还需要一张<code>_ExtraTex</code>，这张<code>_ExtraTex</code>是作为alpha mash来使用的，不同的shader有不同的用法。还有两个颜色参数<code>_Color</code>和<code>_AdditiveColor</code>，对应的是recipe中设置的乘法颜色和加法颜色。</p>
<p>这个<code>_ExtraTex</code>默认是来自于overlay中设置的Alpha Mask的，如果改overlay中没有设置Alpha Mask，那么就用改overlay的第一张贴图的alpha通过。</p>
<p>三个shader对于这张<code>_ExtraTex</code>的使用是不同的，具体如下：</p>
<ul>
<li><p>AtlasShader</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">half4 frag (v2f i) : COLOR</span><br><span class="line">&#123;</span><br><span class="line">    half4 texcol = tex2D (_MainTex, i.uv) * _Color + _AdditiveColor;</span><br><span class="line">    half4 maskcol = tex2D (_ExtraTex, i.uv);</span><br><span class="line">    return texcol * maskcol.a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><code>_ExtraTex</code>的alpha通道乘以<code>_MainTex</code>的所有通道，得到最终值。</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2020/03/06/UMA自定义材质设置和带cloth的slot制作指南/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lumieru.github.io/2020/01/14/Unity的MemoryPool模块/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lumieru">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lumieru的知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/01/14/Unity的MemoryPool模块/" class="post-title-link" itemprop="url">Unity的MemoryPool模块</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-01-14 10:34:08 / 修改时间：10:46:54" itemprop="dateCreated datePublished" datetime="2020-01-14T10:34:08+08:00">2020-01-14</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/GameEngine/" itemprop="url" rel="index"><span itemprop="name">GameEngine</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><p><a href="https://duanyiliang.com/2018/07/14/unity_memorypool/" target="_blank" rel="noopener">原文出处</a></p>
<p>MemoryPool主要是对内存分配的碎片化和频繁分配和释放进行优化。</p>
<h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><p>MemoryPool的设计结构如下:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MemoryPool</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ...</span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Bubble</span></span></span><br><span class="line"><span class="class">    &#123;</span></span><br><span class="line">        <span class="keyword">char</span> data[<span class="number">1</span>]; <span class="comment">//只是一个占位符,其实这个成员变量加不加sizeof(Block)大小都是1个字节</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">typedef</span> dynamic_array&lt;Bubble*&gt; Bubbles;</span><br><span class="line"></span><br><span class="line">    Bubble m_Bubbles;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">void</span>* m_HeadOfFreeList;</span><br><span class="line">  </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2020/01/14/Unity的MemoryPool模块/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lumieru.github.io/2019/11/19/UMA中Mesh的管理和合成/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lumieru">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lumieru的知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/11/19/UMA中Mesh的管理和合成/" class="post-title-link" itemprop="url">UMA中Mesh的管理和合成</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-11-19 18:30:32 / 修改时间：20:07:46" itemprop="dateCreated datePublished" datetime="2019-11-19T18:30:32+08:00">2019-11-19</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <ol>
<li><h2 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h2><ul>
<li><p><code>UMA.UMABlendFrame</code>:</p>
<p>  在UMAMeshData.cs文件中</p>
  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UMABlendFrame</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">float</span> frameWeight = <span class="number">100.0f</span>; <span class="comment">//should be 100% for one frame</span></span><br><span class="line">    <span class="keyword">public</span> Vector3[] deltaVertices = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> Vector3[] deltaNormals = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> Vector3[] deltaTangents = <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>一个BlendShape可以包含很多帧，最后一帧（<code>frameWeight = 100.0f</code>）是这个BlendShape的最终形态，而中间还可以有很多过度的平滑帧（就像放动画一样）。他们一般都是按frameWeight从小到大排列的。</li>
<li><code>UMABlendFrame</code>代表BlendShape的某一帧。在大部分情况下，一个BlendShape只有一帧。</li>
<li><code>frameWeight</code>表示这一帧是最终形态的百分之多少。</li>
<li><code>deltaVertices</code>数组，大小和整个base mesh的顶点数相同。数组中的每一项，表示这一帧BlendShape的顶点和baseMesh中相应顶点的位置差（offset）。baseMesh中的顶点位置加上这个deltaVertices可以得到BlendShape中顶点的绝对位置。</li>
<li><code>deltaNormals</code>数组，意义同上，只是表示的是法线。</li>
<li><code>deltaTangents</code>数组，意义同上，只是表示的是切线。</li>
</ul>
</li>
<li><p><code>UMA.UMABlendShape</code>:</p>
<p>  在UMAMeshData.cs文件中</p>
  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UMABlendShape</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> shapeName;</span><br><span class="line">    <span class="keyword">public</span> UMABlendFrame[] frames;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>表示一个完整的BlendShape，里面可以包含多个帧。</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/11/19/UMA中Mesh的管理和合成/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </li></ul></li></ul></li></ol></div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lumieru.github.io/2019/11/16/UMA是如何动态生成Unity的Avatar的/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lumieru">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lumieru的知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/11/16/UMA是如何动态生成Unity的Avatar的/" class="post-title-link" itemprop="url">UMA是如何动态生成Unity的Avatar的</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-11-16 14:05:51" itemprop="dateCreated datePublished" datetime="2019-11-16T14:05:51+08:00">2019-11-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-11-19 18:24:35" itemprop="dateModified" datetime="2019-11-19T18:24:35+08:00">2019-11-19</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <ol>
<li><h2 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h2><ul>
<li><p><code>UnityEngine.SkeletonBone</code>:</p>
<ul>
<li>是一个Struct</li>
<li>Details of the Transform name mapped to the skeleton bone of a model and its default position and rotation in the T-pose.</li>
<li>表示模型中的骨骼，其中带有骨骼的名字，还有在TPose时的平移缩放旋转信息。</li>
</ul>
</li>
<li><p><code>UnityEngine.HumanBone</code>:</p>
<ul>
<li>是一个Struct</li>
<li>The mapping between a bone in the model and the conceptual bone in the Mecanim human anatomy.</li>
<li>表示模型中的骨骼与Mecanim人体解剖学中的概念性骨骼之间的映射，其中模型中骨骼的名字，和Mecanim骨骼的名字，还有这个定义了这个骨骼的肌肉的旋转极限的<code>HumanLimit</code>。</li>
</ul>
</li>
<li><p><code>UnityEngine.HumanLimit</code>:</p>
<ul>
<li>是一个Struct</li>
<li>This class stores the rotation limits that define the muscle for a single human bone.</li>
<li>表示一根骨骼的肌肉的旋转极限。</li>
</ul>
</li>
<li><p><code>UMA.UmaTPose</code>:</p>
<ul>
<li>UMA-&gt;Extract T-Pose生成的文件，就是由这个类的实例序列化来的。</li>
<li>是一个Classbaok</li>
<li><p>UMA用来表示和存储Unity中的Avatar的一个类，其中包含了：</p>
<ul>
<li><code>SkeletonBone</code>的数组，用来记录在TPose时所有模型骨骼的信息（包括在config unity avatar时所有的节点，比如Model节点等，不光光是代表骨骼的节点）。</li>
<li><code>HumanBone</code>的数组，用来记录模型骨骼和Mecanim骨骼的一一映射关系。</li>
<li>还包含了Muscles设置中的一些配置信息。</li>
</ul>
</li>
</ul>
</li>
<li><p><code>UnityEngine.HumanDescription</code>:</p>
<ul>
<li>是一个Struct</li>
<li>其实就是Unity版的UmaTPose，其中包含了<code>SkeletonBone</code>的数组和<code>HumanBone</code>的数组和其他的一些avatar配置，可以用这个来创建一个新的avatar。</li>
</ul>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/11/16/UMA是如何动态生成Unity的Avatar的/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </li></ul></li></ol></div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lumieru.github.io/2019/11/14/UMA-301视频教程备忘录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lumieru">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lumieru的知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/11/14/UMA-301视频教程备忘录/" class="post-title-link" itemprop="url">UMA 301视频教程备忘录</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-11-14 18:53:25" itemprop="dateCreated datePublished" datetime="2019-11-14T18:53:25+08:00">2019-11-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-11-23 18:29:05" itemprop="dateModified" datetime="2019-11-23T18:29:05+08:00">2019-11-23</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <ol>
<li><h2 id="制作一个Base-Model"><a href="#制作一个Base-Model" class="headerlink" title="制作一个Base Model"></a>制作一个Base Model</h2><ul>
<li>用Adobe Fuse生成一个光头T pose模型，导出上传到Mixamo，Mixamo会自动为这个模型绑定骨骼，还要生成一些脸部表情的Blend Shapes。</li>
<li>导入Blender，删除一些多余的骨骼，可以看到有很多面部表情的Blend Shapes。</li>
<li><p>还可以利用其他的工具来生成模型，比如Daz。</p>
<p><a href="https://www.youtube.com/watch?v=W0mK2k-IbGE&amp;list=PLkDHFObfS19yjYoQsMR0dCGjCLsrF1dB4&amp;index=1" target="_blank" rel="noopener">UMA 301 - Part 1 Creating a Base Model</a></p>
</li>
</ul>
</li>
<li><h2 id="修正一些不对的地方"><a href="#修正一些不对的地方" class="headerlink" title="修正一些不对的地方"></a>修正一些不对的地方</h2><ul>
<li>Fuse导入Blender的模型，normal map没有起作用，要调整一下的。</li>
<li>模型的全局Scale不是1，Rotation也不都是0，需要apply scale &amp; rotation，把他们烘培到mesh顶点上，让scale和rotation归一化。</li>
<li><p>要在原有的以Hip为root的骨架上，在加两个骨骼Global-&gt;Position，这是UMA需要的骨架结构。</p>
<p><a href="https://www.youtube.com/watch?v=7ZjdNoA1WKk&amp;list=PLkDHFObfS19yjYoQsMR0dCGjCLsrF1dB4&amp;index=2" target="_blank" rel="noopener">UMA 301 - Part 2 Fixing Scale &amp; Global Bones</a></p>
</li>
</ul>
</li>
<li><h2 id="添加一些调整用的骨骼来改变人物外形"><a href="#添加一些调整用的骨骼来改变人物外形" class="headerlink" title="添加一些调整用的骨骼来改变人物外形"></a>添加一些调整用的骨骼来改变人物外形</h2><ul>
<li>因为现有的骨骼，你在调整上级的scale的时候，所有的下级都会受到影响，这不是我们想要的，所以我们需要在调整的地方复制一个骨骼（没有下级）。</li>
<li>然后把复制的骨骼作为原骨骼的子（本来他们应该是同一级的），并且把原骨骼的权重全部转移到复制的骨骼上（原骨骼不在影响任何顶点，所有的影响都到复制的骨骼上了）。</li>
<li><p>以上步骤是针对现有的骨骼的，如果要新建一个调整骨骼（一般都是叶子节点了），那么先新建好骨骼，放在对应的层级下面，然后再刷顶点权重。</p>
<p><a href="https://www.youtube.com/watch?v=50NPn9WgbD4&amp;list=PLkDHFObfS19yjYoQsMR0dCGjCLsrF1dB4&amp;index=3" target="_blank" rel="noopener">UMA 301 - Part 3 Creating Adjustment Bones</a></p>
</li>
</ul>
</li>
<li><h2 id="创建BlendShape来改变人物外形"><a href="#创建BlendShape来改变人物外形" class="headerlink" title="创建BlendShape来改变人物外形"></a>创建BlendShape来改变人物外形</h2><ul>
<li>每个BlendShape（morph target）都是原始mesh的一个copy，所以如果有很多blendshape的话，会占用很多内存的</li>
<li><p>在Blender中新建一个ShapeKey，然后进入编辑模式，改变一些顶点，就可以创建一个新的BlendShape了。</p>
<p><a href="https://www.youtube.com/watch?v=WWbiPWTuS7k&amp;list=PLkDHFObfS19yjYoQsMR0dCGjCLsrF1dB4&amp;index=4" target="_blank" rel="noopener">UMA 301 - Part 4 Creating Blendshapes</a></p>
</li>
</ul>
</li>
</ol>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/11/14/UMA-301视频教程备忘录/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lumieru.github.io/2019/11/14/UMA-201视频教程备忘录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lumieru">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lumieru的知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/11/14/UMA-201视频教程备忘录/" class="post-title-link" itemprop="url">UMA 201视频教程备忘录</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-11-14 13:19:41 / 修改时间：16:01:57" itemprop="dateCreated datePublished" datetime="2019-11-14T13:19:41+08:00">2019-11-14</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <ol>
<li><h2 id="制作Overlay"><a href="#制作Overlay" class="headerlink" title="制作Overlay"></a>制作Overlay</h2><ul>
<li>先准备好Overlay用到的贴图，每个Overlay单独一个文件夹，把贴图放在文件夹下面。</li>
<li>菜单UMA-&gt;Core-&gt;Overlay Asset，设置好名字，然后设置Material（是UMA专用的Material），一般选择UMA_Diffuse_Normal_Metallic，选择对应的贴图数量，这个材质是3个贴图。</li>
<li>把创建好的Overlay放入到UMA Global Library中。</li>
<li>创建对应的Wardrobe Recipe，菜单UMA-&gt;DCS-&gt;Wardrobe Recipe，选择对应的race，选择Wardrobe Slot，选择对应的Base Slot，最后Add Overlay。</li>
<li>把创建好的Wardrobe Recipe放入到UMA Global Library中。</li>
<li><p>PS：如果发现做好的Overlay分辨率比原始素材要低，那是因为UMA在生成最终贴图的时候，会把分辨率减半。这个是可以设置的，在UMA_DCS-&gt;UMAGenerator-&gt;Initial Scale Factor，默认是2，就是贴图尺寸减半，如果改成1，就是保持原来的贴图大小。这样分辨率就高了，当然会占用更多的资源。</p>
<p><a href="https://www.youtube.com/watch?v=WdnXorLkSSM&amp;list=PLkDHFObfS19yOjGzDUqvoq-oTy97g2G_J&amp;index=2" target="_blank" rel="noopener">UMA 201 - Part 2a Skin Overlays</a></p>
</li>
</ul>
</li>
<li><h2 id="优化Overlay"><a href="#优化Overlay" class="headerlink" title="优化Overlay"></a>优化Overlay</h2><ul>
<li>如果制作的Overlay是一张很大的图，但是只用到了其中很小的一部分，其他部分都是空白，那么会浪费很多最后游戏包的空间（runtime内存是不浪费的，因为UMA最终会合成一张贴图）。</li>
<li>到ps中，找到一个小的长方形区域（2的幂次方），可以完全包含需要的那部分贴图，记住这个区域和整张图的左上角的偏移量。</li>
<li>然后把原图切小成小的长方形区域大小，并保存放回unity中覆盖原图。</li>
<li>回到Overlay的设置界面，设置其中的Rect参数。因为ps中偏移量是从原图左上角到小区域的左上角，而unity需要的是原图左下角，到小区域的左下角，所以这里的偏移量需要做计算的，如下图所示。最后还要填上小图的尺寸大小。<br><img src="http://blog.sensedevil.com/image/OverlayOffset.png" alt="OverlayOffset.png"></li>
<li><p>然后要更新一下对应的Wardrobe Recipe，在其中删除老的Overlay，重新添加修改的Overlay，就大功告成了。</p>
<p><a href="https://www.youtube.com/watch?v=vPxqvnOuuN4&amp;list=PLkDHFObfS19yOjGzDUqvoq-oTy97g2G_J&amp;index=3" target="_blank" rel="noopener">UMA 201 - Part 2b Optimising Overlays</a></p>
</li>
</ul>
</li>
<li><h2 id="把其他的模型适配到UMA第一节"><a href="#把其他的模型适配到UMA第一节" class="headerlink" title="把其他的模型适配到UMA第一节"></a>把其他的模型适配到UMA第一节</h2><ul>
<li>把fbx导入到blender中，注意导入的选项，保证骨骼的方向是正确的。</li>
<li>通过骨骼的旋转和缩放等，把导入的模型和UMA模型基本重叠起来。</li>
<li>把旋转和缩放都bake到模型的顶点上，确保骨骼和模型没有旋转和缩放。</li>
<li><p>把模型和骨骼解除绑定，并删除其中的权重信息。</p>
<p><a href="https://www.youtube.com/watch?v=bY9n1fO3PnA&amp;list=PLkDHFObfS19yOjGzDUqvoq-oTy97g2G_J&amp;index=4" target="_blank" rel="noopener">UMA 201 - Part 3a Preparing Pre-Rigged Clothing</a></p>
</li>
</ul>
</li>
</ol>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/11/14/UMA-201视频教程备忘录/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lumieru.github.io/2019/11/14/UMA-101视频教程备忘录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lumieru">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lumieru的知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/11/14/UMA-101视频教程备忘录/" class="post-title-link" itemprop="url">UMA 101视频教程备忘录</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-11-14 11:20:56" itemprop="dateCreated datePublished" datetime="2019-11-14T11:20:56+08:00">2019-11-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-11-15 20:05:59" itemprop="dateModified" datetime="2019-11-15T20:05:59+08:00">2019-11-15</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <ol>
<li><p>UMA_DCS prefab 加上 UMA Dynamic Character Avatar, 选择一个race，然后设置好默认的animator controller就可以运行了。</p>
<p><a href="https://www.youtube.com/watch?v=Wse9I72YJvc&amp;list=PLkDHFObfS19zFVfbrfB14P-u5QJJQyvtP&amp;index=2" target="_blank" rel="noopener">UMA 101 - Part 2 Up and Running</a></p>
</li>
<li><p>base recipe –&gt; 确定一个裸体的人物模型。<br>wardrobe recipe –&gt; 确定人物的衣服，鞋子，饰品等；这里可以设置A物体覆盖B物体。</p>
<p> <a href="https://www.youtube.com/watch?v=tXbxhSmzlmk&amp;list=PLkDHFObfS19zFVfbrfB14P-u5QJJQyvtP&amp;index=3" target="_blank" rel="noopener">UMA 101 - Part 3 Introducing Recipes</a></p>
</li>
<li><p>Dynamic Character Avatar中的Default Recipes可以为这个人物添加默认的衣服裤子等。每个Wardrobe recipe都只能和相对应的race一起才能正常工作。Wardrobe slot是设置这个物体是放在人身上的哪个部位的。还可以设置需要覆盖哪个部位的其他物件和base物件。</p>
<p> <a href="https://www.youtube.com/watch?v=SZjzVWbiNaQ&amp;list=PLkDHFObfS19zFVfbrfB14P-u5QJJQyvtP&amp;index=4" target="_blank" rel="noopener">UMA 101 - Part 4 Default Recipes</a></p>
</li>
<li><p>Dynamic Character Avatar中的Character Colors可以重载recipes中的shared colors，然后在slot中可以用shared color来影响overlay的颜色。这样就可以通过设置Character Colors来方便的设置人物的整体颜色。</p>
<p> <a href="https://www.youtube.com/watch?v=Oh7gg7NuYEM&amp;list=PLkDHFObfS19zFVfbrfB14P-u5QJJQyvtP&amp;index=5" target="_blank" rel="noopener">UMA 101 - Part 5 Shared Colours</a></p>
</li>
<li><p>所有的recipes和他们所用到的components都需要到UMA Global Library中去注册才能使用。制作DCS-&gt;wardrobe recipe</p>
<p> <a href="https://www.youtube.com/watch?v=IdfpET4CtUw&amp;list=PLkDHFObfS19zFVfbrfB14P-u5QJJQyvtP&amp;index=7" target="_blank" rel="noopener">UMA 101 - Part 7 Creating Custom Recipes</a></p>
</li>
<li><p>Misc-&gt;Mesh Hide Asset，可以用来隐藏某个slot上的某些三角形，已解决衣服和身体部分重叠的情况下的穿模问题。UMA内建工具可以编辑需要去掉那些三角形。在编辑的时候还可以把衣服覆盖在身体上，方便查看需要隐藏哪些三角形。</p>
<p> <a href="https://www.youtube.com/watch?v=tBwai4Yh8Rw&amp;list=PLkDHFObfS19zFVfbrfB14P-u5QJJQyvtP&amp;index=8" target="_blank" rel="noopener">UMA 101 - Part 8 Advanced Occlusion</a></p>
</li>
</ol>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/11/14/UMA-101视频教程备忘录/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lumieru.github.io/2019/07/23/Math-Magician-Lerp-Slerp-and-Nlerp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lumieru">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lumieru的知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/23/Math-Magician-Lerp-Slerp-and-Nlerp/" class="post-title-link" itemprop="url">Math Magician - Lerp, Slerp, and Nlerp</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-23 21:36:04 / 修改时间：22:13:52" itemprop="dateCreated datePublished" datetime="2019-07-23T21:36:04+08:00">2019-07-23</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/GameEngine/" itemprop="url" rel="index"><span itemprop="name">GameEngine</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Math-Magician-–-Lerp-Slerp-and-Nlerp"><a href="#Math-Magician-–-Lerp-Slerp-and-Nlerp" class="headerlink" title="Math Magician – Lerp, Slerp, and Nlerp"></a>Math Magician – Lerp, Slerp, and Nlerp</h1><p><a href="https://keithmaggio.wordpress.com/2011/02/15/math-magician-lerp-slerp-and-nlerp/" target="_blank" rel="noopener">原文出处</a></p>
<p> <img src="http://blog.sensedevil.com/image/slerp1.svg.png" alt="Illustration of linear interpolation on a data..."><div align="center"><small><em>Illustration of linear interpolation on a data set. The same data set is used for other interpolation methods in the interpolation article. (Photo credit: Wikipedia)</em></small></div></p>
<p>Man, I wish I had this blog going through school, because this place has become my online notebook. Game development is like riding a bike – but math, for me, can have a hard time stickin’. I’ve been working in databases so long that I have a lot of <a href="http://en.wikipedia.org/wiki/Bitwise_operation" title="Bitwise operation" target="_blank" rel="noopener">bit-shifting</a> down, but my matrix and vector math is starting to lack. So, a creative way for me to remember all these algorithms is to try to explain them. Today, I’m going through <a href="http://en.wikipedia.org/wiki/Linear_interpolation" title="Linear interpolation" target="_blank" rel="noopener">Linear Interpolation</a>, Spherical Linear Interpolation, and Normalized Linear Interpolation.</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/07/23/Math-Magician-Lerp-Slerp-and-Nlerp/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lumieru.github.io/2019/06/28/KBEngine源码解读五-转载二/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lumieru">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lumieru的知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/28/KBEngine源码解读五-转载二/" class="post-title-link" itemprop="url">KBEngine源码解读五--转载二</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-06-28 15:05:55 / 修改时间：21:19:26" itemprop="dateCreated datePublished" datetime="2019-06-28T15:05:55+08:00">2019-06-28</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/GameServer/" itemprop="url" rel="index"><span itemprop="name">GameServer</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><a href="https://blog.csdn.net/qq98756524aa/article/details/78782156" target="_blank" rel="noopener">原文地址</a></p>
<p>此笔记是本人在开发及研读的过程中记录下来的，由于没整理，会看得有些吃力，请读者视能力而读，个人理解，如有问题，悉心接受。</p>
<p>部分引用KBEngine官网的一些句段，感谢kbe。</p>
<p>每个cell在被创建时当被观察者观察到时（也就是进入到别人的AOI里）那么会被调用kbe底层回调python层onWitnessed方法，</p>
<p>当然只在增加观察者时第一次被观察到或者删除观察者时观察者个数为0时才回调，通过参数1或者0进行区别，看以下代码</p>
<p><img src="http://blog.sensedevil.com/image/KBE2_1.png" alt="KBE2_1.png"><br><img src="http://blog.sensedevil.com/image/KBE2_2.png" alt="KBE2_2.png"></p>
<p>controlledBy:kbe底层提供了可以把一个非客户端持有的cell上的entity给客户端控制，由客户端来进行可以控制的改变权限是改变方向和位置，</p>
<p>但是这个entity必须是在控制者的entity（demo里的avatar的entity）的Aoi范围内，而且这个控制者是必须被客户端控制的一个entity，</p>
<p>具有aoi也就是还必须是具有cell的，操作如下：</p>
<p>在cell上self.controlledBy = base（操作者的base）</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/06/28/KBEngine源码解读五-转载二/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Lumieru</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">42</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lumieru</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>



  

  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  



  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  
<script>
  $('.highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  

</body>
</html>
